# Skill: Create Plan

**ID:** SKILL_CreatePlan
**Tier:** Silver
**Status:** Active

---

## üìã Description

This skill defines how Qwen creates detailed, actionable plans for items in the Needs_Action folder. It includes reasoning through the task, breaking it into numbered steps with checkboxes, auto-completing simple steps, and flagging sensitive actions for user approval.

---

## üîÑ Workflow

### Step 1: Read Input File

Locate and read the `.md` file from Needs_Action that requires processing.

**File types:**
- `FILE_*.md` - Dropped files (Bronze Tier)
- `EMAIL_*.md` - Gmail messages (Silver Tier)
- `WHATSAPP_*.md` - WhatsApp messages (Silver Tier)

**Extract from YAML frontmatter:**
- `from:` Sender/source
- `subject:` or content topic
- `priority:` Low / Medium / High
- `status:` Current status

**Action:** Parse all metadata and content to understand the full context.

---

### Step 2: Think (Reasoning Phase)

Use Qwen's reasoning to analyze:

1. **Purpose:** Why was this item provided? What is the user's intent?
2. **Category:** What type of task is this?
   - Information processing (read, summarize, extract)
   - Communication (reply, forward, notify)
   - Action required (payment, scheduling, approval)
   - File operation (move, copy, transform)
3. **Complexity:** How many steps are needed?
4. **Sensitivity:** Does this require user approval?
   - Sending emails/messages on behalf of user
   - Financial actions (payments, invoices)
   - Data modifications or deletions
   - External API calls with side effects

---

### Step 3: Determine Auto-Executable vs Approval-Required

**Auto-Executable (can mark [x] immediately):**
- Reading and analyzing content
- Summarizing information
- Extracting data points
- Creating documentation
- Organizing/categorizing
- Moving files to Done (after completion)

**Approval-Required (flag for user):**
- Sending emails or messages
- Making payments or financial commitments
- Scheduling meetings on user's calendar
- Deleting or modifying external data
- Calling external APIs with write access
- Any action with irreversible consequences

---

### Step 4: Create Plan File

Write a new plan file to `Plans/` folder.

**Naming convention:** `PLAN_YYYYMMDD_SourceName_BriefDescription.md`

**Plan structure:**

```markdown
# Plan: [Clear, Actionable Title]

**Source File:** [filename from Needs_Action]
**Created:** [ISO timestamp]
**Priority:** [from metadata]
**Status:** In Progress

---

## Objective

[Clear 1-2 sentence description of what we're accomplishing]

---

## Steps

- [x] Step 1: [Auto-completed if already done, e.g., "Read and analyze content"]
- [ ] Step 2: [Next actionable step]
- [ ] Step 3: [Continue numbering...]
- [ ] Step N: [Final step, e.g., "Move source file to Done"]

---

## Approval Required

*[Include this section ONLY if sensitive actions are needed]*

The following actions require user approval before proceeding:

### Action: [Brief name, e.g., "Send Reply Email"]

**Description:** [What will be done]

**Details:**
- To: [recipient]
- Subject: [subject line]
- Content summary: [what will be sent]

**Approval File:** `Pending_Approval/<action_name>.md`

- [ ] User approval pending

---

## Output

[Expected result after plan completion]

---

## Notes

[Any relevant observations, assumptions, or context]

---

## Execution Log

*[Update this section as steps are completed]*

- [Timestamp] Started plan execution
- [Timestamp] Completed: Step X
- [Timestamp] [Continue logging...]

---

*Generated by SKILL_CreatePlan - Silver Tier*
```

---

### Step 5: Create Approval File (If Needed)

For each approval-required action, create a file in `Pending_Approval/`.

**Naming convention:** `Pending_Approval/<ActionName>_<timestamp>.md`

**Approval file structure:**

```markdown
# Approval Required: [Action Name]

**Source Plan:** [PLAN_*.md link]
**Source File:** [original Needs_Action file]
**Created:** [timestamp]
**Status:** Awaiting Approval

---

## Action Details

**What:** [Clear description of the action]

**Why:** [Reason this action is needed]

**Impact:** [What will happen when executed]

---

## Execution Details

[Include specific details needed for execution]

**Example for email:**
- **To:** recipient@example.com
- **Subject:** Reply: Original Subject
- **Body Preview:** > Thank you for your message...

**Example for payment:**
- **Amount:** $X.XX
- **Recipient:** Company Name
- **Due Date:** YYYY-MM-DD

---

## Approval

To approve this action:
1. Review the details above
2. Check the box below (or reply with "approved")
3. Qwen will proceed with execution

- [ ] **User Approval:** [ ] Approved  [ ] Rejected

---

## Execution Status

- [ ] Awaiting approval
- [ ] Approved - Ready to execute
- [ ] Executed successfully
- [ ] Rejected by user

---

*Created by SKILL_CreatePlan - Approval Workflow*
```

---

### Step 6: Update Dashboard

After creating the plan:

1. **Add to Processing Log table:**
   | Timestamp | File | Action | Result |
   |-----------|------|--------|--------|
   | [now] | [filename] | Plan created | In Progress |

2. **Add to Current Queue** (if not already listed)

3. **Update Status Overview** counts if applicable

---

### Step 7: Begin Execution (Auto-Executable Steps)

For plans without approval requirements, or for auto-executable steps:

1. **Execute each step** in order
2. **Update checkboxes:** Mark `[x]` as steps complete
3. **Log progress:** Add entries to Execution Log section
4. **Continue until:**
   - All auto-steps complete, OR
   - Approval-required step reached

---

### Step 8: Handle Approval Workflow

If approval is required:

1. **Stop execution** at approval point
2. **Notify user** that approval file created
3. **Wait** for user to:
   - Check approval box in Pending_Approval file, OR
   - Reply with approval/rejection
4. **On approval:** Continue execution
5. **On rejection:** Update plan status, notify user

---

## ‚úÖ Success Criteria

A plan is considered well-created when:

- [ ] Input file was fully read and understood
- [ ] Reasoning phase identified purpose and category
- [ ] Steps are numbered, specific, and actionable
- [ ] Auto-executable steps are marked [x] when done
- [ ] Sensitive actions are flagged for approval
- [ ] Approval file created in Pending_Approval/ (if needed)
- [ ] Dashboard.md updated
- [ ] Plan follows naming convention and structure

---

## ‚ö†Ô∏è Error Handling

If plan creation fails:

1. **Do not delete** the source file
2. **Add note** to source file explaining the block
3. **Create error log** in Logs/ if systematic issue
4. **Wait** for user intervention

**Common blockers:**
- Unclear user intent
- Missing information needed for execution
- Conflicting instructions
- Technical limitations (API access, permissions)

---

## üìù Examples

### Example 1: Simple File Processing (No Approval)

**Input:** `Needs_Action/notes.txt.md` (meeting notes)

**Plan created:** `Plans/PLAN_20250217_notes_ExtractActionItems.md`

**Steps:**
- [x] Read and analyze meeting notes
- [x] Extract action items with owners
- [x] Create summary table
- [ ] Move source file to Done

*No approval needed - information processing only*

---

### Example 2: Email Response (Approval Required)

**Input:** `Needs_Action/EMAIL_12345_ClientInquiry.md`

**Plan created:** `Plans/PLAN_20250217_EMAIL_12345_ReplyToClient.md`

**Steps:**
- [x] Read and analyze email content
- [x] Draft response based on company info
- [ ] Send reply via Gmail
- [ ] Move source file to Done

**Approval Required section:**
```markdown
## Approval Required

### Action: Send Reply Email

**Description:** Send drafted response to client inquiry

**Details:**
- To: client@example.com
- Subject: Re: Product Inquiry
- Content: Thank you for your interest... (see draft)

**Approval File:** `Pending_Approval/SendReply_EMAIL_12345.md`

- [ ] User approval pending
```

---

### Example 3: WhatsApp Payment Request (Approval Required)

**Input:** `Needs_Action/WHATSAPP_20250217_Vendor_Payment.md`

**Plan created:** `Plans/PLAN_20250217_WHATSAPP_ProcessVendorPayment.md`

**Steps:**
- [x] Read WhatsApp message
- [x] Verify invoice details
- [ ] Process payment via banking system
- [ ] Confirm payment to vendor
- [ ] Move source file to Done

**Approval Required:** Payment action flagged - requires user approval before any financial transaction.

---

## üîÑ Iteration Loop

For complex multi-step plans:

1. **Execute** available auto-steps
2. **Check** for approval requirements
3. **Wait** if approval needed
4. **Continue** after approval received
5. **Repeat** until all steps complete
6. **Update** plan status to "Completed"
7. **Add** completion summary

---

*This skill enables the Silver Tier AI Employee to reason through tasks, execute safely, and involve the user for sensitive decisions.*
